identifier: "com.github.xishie.munki.bitwarden"
description: "Downloads and imports latest Bitwarden Desktop DMG into Munki."
minimum_version: "1.0"

parent_recipe: "com.github.xishie.download.Bitwarden"

input:
  NAME: "Bitwarden"
  DEVELOPER: "Bitwarden Inc."
  MUNKI_REPO_SUBDIR: "apps/Bitwarden"
  AUTOPKG_MUNKI_REPO: "/mnt/munki_repo"

process:
  - processor: "MunkiImporter"
    arguments:
      pkg_path: "%RECIPE_CACHE_DIR%/downloads/%NAME%.dmg"
      repo_subdirectory: "%MUNKI_REPO_SUBDIR%"
      pkginfo:
        name: "%NAME%"
        display_name: "%NAME%"
        description: "Bitwarden is a free and open-source password manager."
        version: "%version%"
        developer: "%DEVELOPER%"
        category: "%CATEGORY%"
        minimum_os_version: "12.0"
        autoremove: False
        unattended_install: True